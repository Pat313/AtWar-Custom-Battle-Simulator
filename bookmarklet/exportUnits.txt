javascript:(function(){const u=atWar.Static.GameModule.$3$UnitsField.buckets,r=atWar.Static.GameModule.$3$UnitRolesField.buckets,p=atWar.Static.GameModule.MapData.Id,f=atWar.Static.GameModule.MapData.CreatorName+' - '+atWar.Static.GameModule.MapData.Name,e={};const m=Object.fromEntries(Object.values(u).map(a=>[[a[0].value.Id,a[0].value.Name]])),n=Object.fromEntries(Object.values(r).map(a=>[[a[0].value.Id,a[0].value.Name.toLowerCase().replace(/:/g,'').replace(/\s+/g,'_')]]));Object.values(u).forEach(a=>{const v=a[0].value,d=(v.UnitDefenceList||[]).filter(x=>x.AttackingUnitId).map(x=>({unit_id:m[x.AttackingUnitId]||x.AttackingUnitId.toString(),defbonus:x.DefenceBonus}));e[v.Name]={image:`https://atwar-game.com/games/getimage.php?url=maps/map-${p}/units/${v.Id}.jpg`,max_attack:v.MaxAttack,max_defence:v.MaxDefence,hp:v.HitPoints,crit:v.Crit,unit_role_id:n[v.UnitRoleId]||v.UnitRoleId,defbonus:d}});const l=document.createElement('a');l.href=URL.createObjectURL(new Blob(['window.units='+JSON.stringify(e,null,4)+';'],{type:'text/javascript'}));l.download=f+'.js';document.body.appendChild(l);l.click();document.body.removeChild(l)})();
